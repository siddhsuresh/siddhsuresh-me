"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible please:\r\n - Link issue via \"Closes #[issue_number]\r\n - Choose & follow the right checklist for the change that you're making:\r\n-->\r\n\r\nCloses: #3800\r\n\r\n**Testing using https://github.com/blitz-js/legacy-framework/blob/main/examples/auth/blitz.config.ts**\r\n\r\n## Before\r\n```ts\r\n//blitz.config.ts\r\nimport {sessionMiddleware, simpleRolesIsAuthorized} from \"blitz\"\r\nimport db from \"db\"\r\nconst withBundleAnalyzer = require(\"@next/bundle-analyzer\")({\r\n  enabled: process.env.ANALYZE === \"true\",\r\n})\r\n\r\nmodule.exports = withBundleAnalyzer({\r\n  middleware: [\r\n    sessionMiddleware({\r\n      cookiePrefix: \"blitz-auth-example\",\r\n      isAuthorized: simpleRolesIsAuthorized,\r\n      // sessionExpiryMinutes: 4,\r\n      getSession: (handle) => db.session.findFirst({where: {handle}}),\r\n    }),\r\n  ],\r\n  cli: {\r\n    clearConsoleOnBlitzDev: false,\r\n  },\r\n  codegen: {\r\n    templateDir: \"./my-templates\",\r\n  },\r\n  log: {\r\n    // level: \"trace\",\r\n  },\r\n  experimental: {\r\n    initServer() {\r\n      console.log(\"Hello world from initServer\")\r\n    },\r\n  },\r\n  /*\r\n  webpack: (config, {buildId, dev, isServer, defaultLoaders, webpack}) => {\r\n    // Note: we provide webpack above so you should not `require` it\r\n    // Perform customizations to webpack config\r\n    // Important: return the modified config\r\n    return config\r\n  },\r\n  webpackDevMiddleware: (config) => {\r\n    // Perform customizations to webpack dev middleware config\r\n    // Important: return the modified config\r\n    return config\r\n  },\r\n  */\r\n})\r\n```\r\n\r\n## After\r\n```js\r\n//next.config.js\r\nconst db = require(\"db\");\r\nconst {sessionMiddleware, simpleRolesIsAuthorized} = require(\"blitz\");\r\nconst { withBlitz } = require(\"@blitzjs/next\");\r\nconst withBundleAnalyzer = require(\"@next/bundle-analyzer\")({\r\n  enabled: process.env.ANALYZE === \"true\",\r\n})\r\n\r\nmodule.exports = withBlitz(withBundleAnalyzer({\r\n  cli: {\r\n    clearConsoleOnBlitzDev: false,\r\n  },\r\n\r\n  codegen: {\r\n    templateDir: \"./my-templates\",\r\n  },\r\n\r\n  log: {\r\n    // level: \"trace\",\r\n  },\r\n\r\n  experimental: {\r\n    initServer() {\r\n      console.log(\"Hello world from initServer\")\r\n    },\r\n  }\r\n  /*\r\n  webpack: (config, {buildId, dev, isServer, defaultLoaders, webpack}) => {\r\n    // Note: we provide webpack above so you should not `require` it\r\n    // Perform customizations to webpack config\r\n    // Important: return the modified config\r\n    return config\r\n  },\r\n  webpackDevMiddleware: (config) => {\r\n    // Perform customizations to webpack dev middleware config\r\n    // Important: return the modified config\r\n    return config\r\n  },\r\n  */\r\n}));\r\n```"