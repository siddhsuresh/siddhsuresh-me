"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible please:\r\n - Link issue via \"Closes #[issue_number]\r\n - Choose & follow the right checklist for the change that you're making:\r\n-->\r\n\r\nCloses: #3862\r\nCloses: #3858\r\nCloses: https://github.com/blitz-js/blitz/issues/1098\r\n\r\n### What are the changes and their implications?\r\n\r\n- [x] migrate required files from legacy framework repo \r\n- https://github.com/blitz-js/legacy-framework/blob/main/nextjs/packages/next/cli/next-console.ts\r\n- https://github.com/blitz-js/legacy-framework/blob/main/packages/cli/src/commands/console.ts\r\n- [x] use ```esbuild``` instead of ```ts-node``` with reference to https://github.com/blitz-js/blitz/issues/1098#issuecomment-823670547 \r\n- [x] add ```--only-db``` flag allows users to only load the ```db``` module in the initial load of the console but allows usage other modules when changes are made \r\n\r\n> In the following images the \"Loaded ... with the time\" is only for reference and is not present in the code\r\n\r\n### Before esbuild\r\n\r\n![image](https://user-images.githubusercontent.com/83594610/192139300-6d169484-33c0-482a-8bb8-4b1a1ec36f07.png)\r\n\r\n### After esbuild\r\n\r\n![image](https://user-images.githubusercontent.com/83594610/192139307-e3f56983-09fa-44b1-b31e-6c77d4fa1b44.png)\r\n\r\n### With ```skip-preload```\r\n![image](https://user-images.githubusercontent.com/83594610/192139898-d9ddb793-b995-4789-b051-c3af96a9db36.png)\r\n\r\n### If the ```db``` folder does not exist by the user provide the location of ```prisma``` schema\r\n```js\r\n//package.json\r\n\r\n\"prisma\": {\r\n    \"schema\": \"prisma/schema.prisma\"\r\n  },\r\n```\r\n![image](https://user-images.githubusercontent.com/83594610/192140639-e5937f36-5dea-4fbc-93cf-d6950769a370.png)\r\n\r\n## Only reloading the modules that are changed and not all when the user makes changes\r\n\r\n```ts\r\nconst setupFileWatchers = async (repl: REPLServer) => {\r\n  debug(\"Setting up file watchers...\")\r\n  const watchers = [\r\n    watch(await getBlitzModulePaths(), {\r\n      ignoreInitial: true,\r\n    }).on(\r\n      \"all\",\r\n      async (event:string, path: string) => { 👈🏼\r\n        const modulePath = path\r\n        const modules = await loadBlitz(false, modulePath) 👈🏼\r\n        loadBlitzModules(repl, modules)\r\n      }\r\n    )\r\n  ]\r\n```\r\n\r\nFor example when a user changes the db/index.ts file only that file is loaded by the code \r\n\r\n![image](https://user-images.githubusercontent.com/83594610/192292379-829e8db8-0b05-4f1a-8e11-bbb7d3fb3d7e.png)\r\n\r\n\r\n\r\n> pnpm blitz -v\r\nBlitz version: 2.0.0-beta.4 (local)\r\nWindows 11 | win32-x64 | Node: v16.13.0\r\n Package manager: npm\r\n  System:\r\n    OS: Windows 10 10.0.22621\r\n    CPU: (4) x64 11th Gen Intel(R) Core(TM) i3-1115G4 @ 3.00GHz\r\n    Memory: 570.32 MB / 7.70 GB\r\n  Binaries:\r\n    Node: 16.13.0 - C:\\Program Files\\nodejs\\node.EXE\r\n    Yarn: 1.22.17 - ~\\AppData\\Roaming\\npm\\yarn.CMD\r\n    npm: 8.1.0 - C:\\Program Files\\nodejs\\npm.CMD\r\n\r\n\r\n"